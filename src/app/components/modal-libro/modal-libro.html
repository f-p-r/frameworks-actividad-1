@if (libro) {
  <!-- Fondo semitransparente: cierra al hacer clic fuera -->
  <div class="modal-backdrop" (click)="onCerrar()"></div>

  <div class="modal-container">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <!-- 游댲 Eliminado el bot칩n "칑" del encabezado -->

      <div class="row">
        <!-- Imagen -->
        <div class="col-md-4 text-center">
          <img
            [src]="'/img/libros/' + libro.id + '.jpg'"
            [alt]="libro.titulo"
            class="img-fluid rounded mb-3"
          />
        </div>

        <!-- Informaci칩n principal -->
        <div class="col-md-5">
          <h4>{{ libro.titulo }}</h4>
          <p class="autor text-primary">{{ libro.autor }}</p>
          <p><strong>Editorial:</strong> {{ libro.editorial }}</p>
          <p><strong>A침o de edici칩n:</strong> {{ libro.anio }}</p>
          <p><strong>Precio:</strong> {{ libro.precio | currency:'EUR' }}</p>
        </div>

        <!-- Botones -->
        <div class="col-md-3 text-center">
          <button class="btn btn-primary w-100 mb-2" (click)="agregarALaCesta()">
            A침adir a la cesta
          </button>
          <button class="btn btn-secondary w-100" (click)="onCerrar()">
            Volver
          </button>
        </div>
      </div>

      <!-- Pesta침as -->
      <ul class="nav nav-tabs mt-4">
        <li class="nav-item">
          <button
            class="nav-link"
            [class.active]="pestana === 'sinopsis'"
            (click)="pestana = 'sinopsis'"
          >
            Sinopsis
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link"
            [class.active]="pestana === 'resenas'"
            (click)="pestana = 'resenas'"
          >
            Rese침as
          </button>
        </li>
      </ul>

      <!-- Contenido de pesta침as -->
      <div class="tab-content mt-3">
        <div
          class="tab-pane"
          [class.show]="pestana === 'sinopsis'"
          [class.active]="pestana === 'sinopsis'"
        >
          <p>{{ libro.sinopsis }}</p>
        </div>

        <div
          class="tab-pane"
          [class.show]="pestana === 'resenas'"
          [class.active]="pestana === 'resenas'"
        >
          <p [innerText]="libro.resenas"></p>
        </div>
      </div>
    </div>
  </div>
}
